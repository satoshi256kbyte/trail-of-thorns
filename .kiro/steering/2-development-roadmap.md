# 開発ロードマップ

## 現在の状況

### 完了済み

- ✅ プロジェクト基盤（TypeScript + Phaser3 + Vite）
- ✅ タイトル画面・メニューシステム
- ✅ ステージ選択画面
- ✅ データエディター（React管理画面）
- ✅ 基本的なUI/UXコンポーネント
- ✅ キーボードナビゲーション
- ✅ JSON データ管理システム

### 次のフェーズ

「魔性の薔薇」の世界観を持つSRPGとしてのゲーム本体の実装

## ゲーム固有要素の実装優先度

### 最優先実装（MVP機能）

1. **仲間化システム**: 敵を味方に引き込む核となる機能
2. **職業・ランクアップシステム**: 薔薇の力による成長要素
3. **キャラクターロストシステム**: 章内でのキャラクター使用不可
4. **ボス戦システム**: 魔性の薔薇の力を持つボス戦

### 高優先実装

1. **章・ステージ管理**: 4-24ステージの章構成
2. **パーティ編成**: 最大6人の戦略的編成
3. **経験値・成長システム**: 多様な経験値獲得方法

## 開発ロードマップ

### フェーズ1: ゲーム基盤システム（4-6週間）

#### 1.1 ゲームプレイシーン基盤

- **目標**: 実際のゲームプレイが行われるメインシーンの構築
- **成果物**: GameplayScene, カメラシステム, 基本UI
- **優先度**: 最高

#### 1.2 マップ・タイル システム

- **目標**: 2Dグリッドベースのマップシステム
- **成果物**: TileMap, MapRenderer, 座標変換システム
- **優先度**: 最高

#### 1.3 キャラクター基盤システム

- **目標**: プレイヤー・敵キャラクターの基本クラス
- **成果物**: Character, Unit, Stats管理
- **優先度**: 最高

#### 1.4 ターン制システム基盤

- **目標**: SRPGの核となるターン制戦闘システム
- **成果物**: TurnManager, ActionQueue, GameState
- **優先度**: 最高

### フェーズ2: 移動・戦闘システム（6-8週間）

#### 2.1 キャラクター移動システム

- **目標**: グリッドベースの移動システム
- **成果物**: MovementSystem, PathFinding, 移動範囲表示
- **優先度**: 最高

#### 2.2 基本戦闘システム

- **目標**: 攻撃・防御・ダメージ計算
- **成果物**: BattleSystem, DamageCalculator, 戦闘アニメーション
- **優先度**: 最高

#### 2.3 仲間化システム（ゲーム固有）

- **目標**: 敵キャラクターを味方に引き込むシステム
- **成果物**: RecruitmentSystem, NPCStateManager, 条件判定システム
- **優先度**: 最高（ゲーム固有の核心機能）

#### 2.4 キャラクターロストシステム（ゲーム固有）

- **目標**: 章内でのキャラクター使用不可システム
- **成果物**: CharacterLossManager, 章内状態管理
- **優先度**: 最高（ゲーム固有の重要機能）

#### 2.5 AI システム

- **目標**: 敵キャラクターの思考ルーチン
- **成果物**: AIController, 行動パターン, 難易度調整
- **優先度**: 高

### フェーズ3: 成長・進行システム（4-6週間）

#### 3.1 経験値・レベルアップシステム（ゲーム固有）

- **目標**: 多様な経験値獲得方法とレベルアップ
- **成果物**: ExperienceSystem（攻撃命中、撃破、支援・回復）
- **優先度**: 最高

#### 3.2 職業・ランクアップシステム（ゲーム固有）

- **目標**: 薔薇の力による職業ランクアップ
- **成果物**: JobSystem, RankUpManager, 薔薇の力管理
- **優先度**: 最高（ゲーム固有の成長要素）

#### 3.3 ボス戦・勝利条件システム（ゲーム固有）

- **目標**: 魔性の薔薇の力を持つボス戦
- **成果物**: BossSystem, VictoryConditions, 薔薇の力獲得
- **優先度**: 最高

#### 3.4 章・ステージ管理システム（ゲーム固有）

- **目標**: 4-24ステージの章構成管理
- **成果物**: ChapterManager, StageProgression, パーティ編成（最大6人）
- **優先度**: 高

#### 3.5 セーブ・ロードシステム

- **目標**: ゲーム進行状況の保存
- **成果物**: SaveManager, GameProgress, データ永続化
- **優先度**: 中

### フェーズ4: ユーザー体験向上（3-4週間）

#### 4.1 アニメーション・エフェクト

- **目標**: 視覚的な魅力向上
- **成果物**: 戦闘アニメーション, UI効果, パーティクル
- **優先度**: 中

#### 4.2 サウンド・音楽システム

- **目標**: 音響効果の実装
- **成果物**: AudioManager, BGM, SE
- **優先度**: 低

#### 4.3 チュートリアル・ヘルプ

- **目標**: 新規プレイヤーへの配慮
- **成果物**: Tutorial, HelpSystem, ガイド
- **優先度**: 中

#### 4.4 設定・オプション

- **目標**: プレイヤー設定の充実
- **成果物**: GameSettings, 音量調整, キー設定
- **優先度**: 低

### フェーズ5: 最適化・完成（2-3週間）

#### 5.1 パフォーマンス最適化

- **目標**: 60fps安定動作の確保
- **成果物**: 最適化されたレンダリング, メモリ管理
- **優先度**: 高

#### 5.2 バグ修正・品質向上

- **目標**: 安定したゲーム体験
- **成果物**: バグフィックス, エラーハンドリング
- **優先度**: 最高

#### 5.3 デプロイ・公開準備

- **目標**: 本番環境への配布
- **成果物**: ビルド最適化, CDN配信設定
- **優先度**: 高

## 技術的な実装方針

### アーキテクチャパターン

- **Entity-Component-System (ECS)**: ゲームオブジェクトの管理
- **State Pattern**: ゲーム状態の管理
- **Command Pattern**: アクション・アンドゥシステム
- **Observer Pattern**: イベント駆動システム

### データ管理戦略

- **静的データ**: JSON（キャラクター、アイテム、ステージ）
- **動的データ**: LocalStorage（セーブデータ）
- **将来的**: AWS DynamoDB（クラウドセーブ）

### テスト戦略

- **ユニットテスト**: 各システムの単体テスト
- **統合テスト**: システム間の連携テスト
- **E2Eテスト**: ゲームプレイフローのテスト
- **パフォーマンステスト**: フレームレート・メモリ監視

## マイルストーン

### マイルストーン1: プロトタイプ完成（8週間後）

- 基本的なSRPGとしてプレイ可能
- 1ステージ完全実装
- 移動・戦闘システム動作

### マイルストーン2: アルファ版（16週間後）

- 複数ステージ実装
- 全基本システム動作
- データエディター連携完了

### マイルストーン3: ベータ版（20週間後）

- 全機能実装完了
- パフォーマンス最適化済み
- バグ修正完了

### マイルストーン4: リリース版（24週間後）

- 本番環境デプロイ
- ドキュメント完備
- 公開準備完了

## リスク管理

### 技術的リスク

- **Phaser3の学習コスト**: 段階的な実装で軽減
- **パフォーマンス問題**: 早期プロファイリングで対応
- **複雑性の増大**: モジュラー設計で管理

### スケジュールリスク

- **機能過多**: MVP優先で段階的実装
- **品質問題**: 継続的テストで早期発見
- **技術的負債**: リファクタリング期間を確保

## 成功指標

### 技術指標

- **フレームレート**: 60fps安定維持
- **ロード時間**: 5秒以内
- **メモリ使用量**: 512MB以下
- **テストカバレッジ**: 80%以上

### ゲームプレイ指標

- **1ステージクリア時間**: 15-30分
- **学習コスト**: チュートリアル完了率80%以上
- **リプレイ性**: 複数戦略での攻略可能
- **仲間化成功率**: プレイヤーの70%以上が仲間化システムを理解・活用
- **キャラクターロスト受容度**: ロスト発生時の継続プレイ率60%以上
- **職業ランクアップ活用率**: ボス撃破後のランクアップ実行率80%以上

## ゲーム固有システムの実装戦略

### 仲間化システムの実装アプローチ

1. **段階的実装**: 基本戦闘 → 条件判定 → NPC化 → 仲間化
2. **UI/UX重視**: プレイヤーが条件を理解しやすい表示
3. **バランス調整**: 仲間化の難易度と報酬のバランス

### 薔薇の力システムの設計

1. **世界観統合**: ストーリーとシステムの一体化
2. **成長の実感**: ランクアップによる明確な能力向上
3. **戦略性**: どのキャラクターをランクアップするかの選択

## 次のアクション

1. **フェーズ1.1**: GameplaySceneの実装から開始
2. **データ構造**: キャラクター・マップデータの詳細設計（仲間化フラグ、職業データ含む）
3. **プロトタイプ**: 仲間化システムを含む最小限のSRPG作成
4. **継続的統合**: ゲーム固有機能を含む段階的統合とテスト

このロードマップに基づいて、「魔性の薔薇」の世界観を持つSRPGとしての機能を段階的に実装していきます。
